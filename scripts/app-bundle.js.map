{"version":3,"sources":["app.js","designer.js","environment.js","main.js","resources/index.js","styles.styl"],"names":["App","configureRouter","config","router","title","map","route","moduleId","name","Designer","httpClient","colors","width","height","align","mode","color","clearColor","drawing","pattern","http","attached","$","css","ii","push","renderPalette","renderGrid","palette","context","getContext","y","x","beginPath","fillStyle","fillRect","strokeStyle","lineWidth","stroke","selectColor","$event","Math","floor","offsetX","pageX","offset","left","offsetY","pageY","top","setMode","setAlign","startDrawing","stopDrawing","drag","draw","click","canvas","size","fill","getPatternCell","setPatternCell","setPtternCell","oldColor","stack","length","cell","pop","horizontalOffset","verticalOffset","attr","arc","PI","save","prop","text","post","description","image","toDataURL","then","catch","alert","error","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Router, RouterConfiguration} from 'aurelia-router';\n\nexport class App {\n  constructor() {}\n\n  configureRouter(config, router){\n    config.title = 'Contacts';\n    config.map([\n      { route: '', moduleId: 'designer', title: 'Beader.org' },\n      { route: 'designer',  moduleId: 'designer', name:'designer' }\n    ]);\n\n    this.router = router;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(HttpClient)\nexport class Designer {\n  constructor(httpClient) {\n    this.http = httpClient;\n  }\n\n  // Palette colors\n\n  colors = ['000000', '002000', '003400', '006700', '009b00', '00ce00', '00ff00', '070707', '000035', '003333', '006731', '009b2c', '00ce23', '00ff10', '0e0e0e', '000068', '003268', '006667', '009a64', '00ce62', '00ff5d', '151515', '00009c', '002f9c', '00659b', '009a9a', '00cd98', '00ff95', '1c1c1c', '0000d0', '0029cf', '0063cf', '0099cf', '00cccd', '00ffcc', '232323', '0000ff', '0021ff', '0060ff', '0096ff', '00cbff', '00ffff', '2a2a2a', '340000', '333300', '316700', '2d9a00', '26ce00', '1bff00', '313131', '340034', '333333', '316731', '2d9a2b', '26ce22', '1aff0f', '383838', '330068', '333268', '306666', '2d9a64', '26ce61', '1aff5c', '3f3f3f', '32009b', '332f9c', '30649a', '2d999a', '25cd98', '19ff96', '464646', '3300d0', '3129cf', '3063cf', '2c99cf', '24cccd', '17ffcb', '4d4d4d', '3100ff', '3021ff', '2e60ff', '2a96ff', '23cbff', '15ffff', '545454', '670000', '673300', '676700', '649a00', '62ce00', '5fff00', '5b5b5b', '670033', '673332', '666730', '659a2a', '62ce21', '5eff0b', '626262', '670068', '673167', '666666', '649a64', '61cd60', '5eff5c', '696969', '67009c', '672e9c', '66659b', '64999a', '61cd97', '5eff95', '707070', '6600cf', '6729d0', '6663cf', '6498ce', '62cdcd', '5dffcb', '777777', '6700ff', '6621ff', '655fff', '6497ff', '61cbff', '5dffff', '7e7e7e', '9b0000', '9a3200', '9a6700', '999a00', '98ce00', '96ff00', '858585', '9a0031', '9b3230', '9a672e', '999a28', '98ce1e', '96ff05', '8c8c8c', '9b0067', '9a3066', '9a6665', '999a64', '97cd60', '95ff5b', '939393', '9b009b', '9a2d9a', '9a659a', '999999', '98cd97', '95ff94', '9a9a9a', '9a00cf', '9a28cf', '9a63cf', '9897cd', '97cccc', '95ffcb', 'a1a1a1', '9a00ff', '9a1fff', '995fff', '9997ff', '97cbff', '95ffff', 'a8a8a8', 'cf0000', 'cf3200', 'ce6600', 'cd9a00', 'cdce00', 'cbff00', 'afafaf', 'cf002e', 'ce312d', 'ce662a', 'cd9a24', 'cccd19', 'cbff00', 'b6b6b6', 'ce0065', 'ce3065', 'cd6563', 'cd9962', 'cccd5e', 'cbff5a', 'bdbdbd', 'ce009a', 'ce2d9a', 'cd6499', 'cd9998', 'cccc96', 'cbff94', 'c4c4c4', 'ce00cf', 'ce27ce', 'ce62ce', 'cd97cd', 'cccccc', 'cbffcb', 'cbcbcb', 'ce00ff', 'ce1eff', 'cd5fff', 'cd96ff', 'cccbff', 'caffff', 'd2d2d2', 'ff0000', 'ff3000', 'ff6600', 'ff9a00', 'ffce00', 'ffff00', 'd9d9d9', 'ff002a', 'ff3028', 'ff6525', 'ff991e', 'ffcd0f', 'ffff00', 'e0e0e0', 'ff0064', 'ff2e64', 'ff6563', 'ff9960', 'ffcd5d', 'ffff58', 'e7e7e7', 'ff0099', 'ff2b99', 'ff6398', 'ff9998', 'ffcd96', 'ffff92', 'eeeeee', 'ff00ce', 'ff25ce', 'ff61cd', 'ff98cd', 'ffcccb', 'ffffc9', 'f5f5f5', 'ff00ff', 'ff1cff', 'ff5eff', 'ff96ff', 'ffcbff', 'ffffff'];\n\n  // Defaults\n\n  width = 10;\n  height = 10;\n  name = 'Untitled Pattern';\n  align = 'normal';\n  mode = 'brush';\n  color = '000000';\n  clearColor = 'ffffff';\n  drawing = false\n\n  pattern = [];\n\n  attached() {\n\n    // Set color\n\n    $('#color').css('backgroundColor', '#' + this.color);\n\n    // Init pattern\n\n    for(let ii = 0; ii < this.width * this.height; ii++){\n      this.pattern.push(this.clearColor);\n    }\n\n    // We're editing a pattern, load it from the backend\n\n    // if($routeParams.id){\n    //     $http.get('/pattern/' + $routeParams.id + '.json').\n    //         success(function(pattern){\n    //             this.width = pattern.width;\n    //             this.height = pattern.height;\n    //             this.name = pattern.name;\n    //             this.align = pattern.align;\n    //             this.mode = pattern.mode;\n    //             this.data = pattern.data;\n    //             this._id = pattern._id;\n    //\n    //             this.renderGrid();\n    //         });\n    // }\n\n    this.renderPalette();\n    this.renderGrid();\n  }\n\n  // Render render the palette canvas\n\n  renderPalette() {\n    let palette = $('#palette')[0];\n    let context = palette.getContext('2d');\n\n    let width = ($(palette).width() - 1) / 7 - 1;\n    let height = ($(palette).height() - 1) / 36 - 1;\n\n    for (let y = 0; y < 36; y++) {\n      for (let x = 0; x < 7; x++) {\n        context.beginPath();\n        context.fillStyle = '#' + this.colors[y * 7 + x];\n        context.fillRect(x * (width + 1), y * (height + 1), width, height);\n        context.strokeStyle = '#ffffff';\n        context.lineWidth = 1;\n        context.stroke();\n      }\n    }\n  }\n\n  selectColor($event) {\n    let palette = $('#palette')[0];\n    let context = palette.getContext('2d');\n\n    let width = Math.floor(($(palette).width() - 1) / 7 - 1);\n    let height = Math.floor(($(palette).height() - 1) / 36 - 1);\n\n    let offsetX = $event.pageX - $(palette).offset().left;\n    let offsetY = $event.pageY - $(palette).offset().top;\n\n    let x = Math.floor(offsetX / (width + 1));\n    let y = Math.floor(offsetY / (height + 1));\n\n    this.color = this.colors[y * 7 + x];\n\n    $('#color').css('backgroundColor', '#' + this.color);\n  }\n\n  setMode(mode) {\n    this.mode = mode;\n  }\n\n  setAlign(align) {\n    this.align = align;\n    this.renderGrid();\n  }\n\n  startDrawing($event) {\n    this.drawing = true;\n  }\n\n  stopDrawing($event) {\n    this.drawing = false;\n  }\n\n  drag($event) {\n    if (this.drawing && this.mode == 'brush') {\n      this.draw($event);\n    }\n  }\n\n  click($event) {\n    if (this.mode == 'brush') {\n      this.stopDrawing($event);\n      this.draw($event);\n    }\n\n    if (this.mode == 'fill') {\n      let canvas = $('#grid')[0];\n      let context = canvas.getContext('2d');\n\n      let size = this.width > this.height ? $(canvas).width() / width : $(canvas).height() / this.height;\n      let x = Math.floor($event.offsetX / size);\n      let y = Math.floor($event.offsetY / size);\n\n      this.fill($event, x, y);\n    }\n  }\n\n  getPatternCell(x, y) {\n    return this.pattern[x + y * this.width];\n  }\n\n  setPatternCell(x, y, color) {\n    this.pattern[x + y * this.width] = color;\n  }\n\n  draw($event) {\n    let canvas = $('#grid')[0];\n    let context = canvas.getContext('2d');\n\n    let size = this.width > this.height ? $(canvas).width() / width : $(canvas).height() / this.height;\n    let x = Math.floor($event.offsetX / size);\n    let y = Math.floor($event.offsetY / size);\n\n    this.setPtternCell(x, y, this.color);\n    this.renderGrid($event);\n  }\n\n  fill($event, x, y) {\n    let oldColor = this.getPatternCell(x, y) || this.clearColor;\n    if (oldColor == $.color) return;\n\n    let stack = [\n      [x, y]\n    ];\n\n    while (stack.length) {\n\n      let cell = stack.pop();\n      let x = cell[0];\n      let y = cell[1];\n\n      this.setPatternCell(x, y, this.color);\n\n      if (x - 1 >= 0 && oldColor == (this.getPatternCell(x - 1, y) || 'ffffff'))\n        stack.push([x - 1, y]);\n\n      if (x + 1 < this.width && oldColor == (this.getPatternCell(x + 1, y) || 'ffffff'))\n        stack.push([x + 1, y]);\n\n      if (y - 1 >= 0 && oldColor == (this.getPatternCell(x, y - 1) || 'ffffff'))\n        stack.push([x, y - 1]);\n\n      if (y + 1 < this.height && oldColor == (this.getPatternCell(x, y + 1) || 'ffffff'))\n        stack.push([x, y + 1]);\n    }\n\n    this.renderGrid($event);\n  }\n\n  renderGrid($event) {\n    var canvas = $('#grid');\n    var context = canvas[0].getContext('2d');\n\n    var size = this.width > this.height ? canvas.width() / this.width : canvas.height() / this.height;\n\n    if (this.align !== 'normal') {\n      size = this.width > this.height ? size - size / this.width / 2 : size - size / this.height / 2;\n    }\n\n    let horizontalOffset = this.align == 'horizontal' ? size / 2 : 0;\n    let verticalOffset = this.align == 'vertical' ? size / 2 : 0;\n\n    canvas.attr('width', canvas.attr('width')); // Clear canvas\n\n    for (let x = 0; x < this.width; x++) {\n      for (let y = 0; y < this.height; y++) {\n        context.beginPath();\n        context.arc(x * size + size / 2 + (y % 2 ? horizontalOffset : 0), y * size + size / 2 + (x % 2 ? verticalOffset : 0), size / 2 - 1, 0, 2 * Math.PI, false);\n        context.fillStyle = '#' + (this.getPatternCell(x, y) || this.clearColor);\n        context.fill();\n        context.lineWidth = 1;\n        context.strokeStyle = '#ddd';\n        context.stroke();\n      }\n    }\n  }\n\n  save() {\n    $('#save-button').prop('disabled', true);\n    $('#save-button').text('Saving...');\n\n    let canvas = $('#grid');\n\n    this.http.post('https://beader-api.herokuapp.com/patterns', {\n      name: this.name,\n      description: '',\n      width: this.width,\n      height: this.height,\n      align: this.align,\n      pattern: this.pattern,\n      image: canvas[0].toDataURL('image/png')\n    })\n    .then(response => {\n      $('#save-button').prop('disabled', false);\n      $('#save-button').text('Save');\n    })\n    .catch(error => {\n      alert('Error: ' + error);\n    });\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null],"sourceRoot":"../src"}